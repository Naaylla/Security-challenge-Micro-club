<!DOCTYPE html>
<html lang="en">
<head>
    <title>Create account</title>
    <link rel="stylesheet" href="CreateAccountStyle.css">
</head>

<body>
    

<div class="container">
    <div class="overlay"></div>
</div>

<div class="navbar">
    <nav>
        <a href="Login.html">Login</a>
        <a href="CreateAccount.html">Create Account</a>
        <a href="#help">Help</a>
        <a href="#categories">Categories</a>
        <a href="home.html">Home</a>
    </nav>
</div>

<div class="bloc">

    <div class="margin">
        <h3>Username:</h3>
        <input id="usernameInput" type="text" placeholder="Username!" oninput="checkInputs()">
    </div>

    <div class="margin">
        <h3>Email:</h3>
        <input id="emailInput" type="email" placeholder="Email ex: hello@gmail.com" oninput="checkInputs()">
    </div>

    <div class="margin">
        <h3>Password:</h3>
        <input id="passwordInput" type="password" placeholder="password" oninput="checkInputs()">
        <h4> NOTE: the password should be at least 8 characters (numbers included) </h4>
    </div>

    <div class="margin">
        <h3>Confirm Password:</h3>
        <input id="confirmPasswordInput" type="password" placeholder="confirm password" oninput="checkInputs()">
    </div>
    <div id="errorText" style="color: red; display: none; font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; margin-top: 5px;">Confirm password does not match!</div>
     
    
    <button id="createAccountButton" class="but" disabled>Create account</button>

    

</div>



<script>
  function checkInputs() {
      var usernameInput = document.getElementById('usernameInput');
      var emailInput = document.getElementById('emailInput');
      var passwordInput = document.getElementById('passwordInput');
      var confirmPasswordInput = document.getElementById('confirmPasswordInput');
      var createAccountButton = document.getElementById('createAccountButton');
      var errorText = document.getElementById('errorText');

      var usernameValue = usernameInput.value.trim();
      var emailValue = emailInput.value.trim();
      var passwordValue = passwordInput.value.trim();
      var confirmPasswordValue = confirmPasswordInput.value.trim();

      // Enable the button only if all input fields are filled
      if (usernameValue !== '' && emailValue !== '' && passwordValue !== '' && confirmPasswordValue !== '') {
          // Check if passwords match
          if (passwordValue === confirmPasswordValue) {
              createAccountButton.removeAttribute('disabled');
              errorText.style.display = 'none'; // Hide the error message
          } else {
              createAccountButton.setAttribute('disabled', 'true');
              errorText.style.display = 'block'; // Show the error message
          }
      } else {
          createAccountButton.setAttribute('disabled', 'true');
          errorText.style.display = 'none'; // Hide the error message
      }
  }

  // Add this event listener to handle the click
  document.getElementById('createAccountButton').addEventListener('click', function(event) {
      // Only proceed if the button is not disabled
      if (!this.hasAttribute('disabled')) {
          alert('Account created!');
      } else {
          event.preventDefault(); // Prevent form submission
          alert('Confirm password does not match!');
      }
  });
</script>





    







</body>
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Create account</title>
    <link rel="stylesheet" href="style2.css">
</head>

<body>
    

  <div class="container">
    <img class="bg" src="bruno-leschi-El-egS_h_N4-unsplash.jpg">
    <div class="overlay"></div>
</div>

<div class="bloc">

    <div class="margin">
        <h3>Username:</h3>
        <input id="usernameInput" type="text" placeholder="Username!" oninput="checkInputs()">
    </div>

    <div class="margin">
        <h3>Email:</h3>
        <input id="emailInput" type="email" placeholder="Email ex: hello@gmail.com" oninput="checkInputs()">
    </div>

    <div class="margin">
        <h3>Password:</h3>
        <input id="passwordInput" type="password" placeholder="password" oninput="checkInputs()">
        <h4> NOTE: the password should be at least 8 characters (numbers included) </h4>
    </div>

    <div class="margin">
        <h3>Confirm Password:</h3>
        <input id="confirmPasswordInput" type="password" placeholder="confirm password" oninput="checkInputs()">
    </div>
    <div id="errorText" style="color: red; display: none; font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; margin-top: 5px;">Confirm password does not match!</div>
     
    
    <button id="createAccountButton" class="but" disabled>Create account</button>

    

</div>



<script>
 
  document.getElementById('createAccountButton').addEventListener('click', function(event) {
    event.preventDefault();
    var usernameInput = document.getElementById('usernameInput');
    var emailInput = document.getElementById('emailInput');
    var passwordInput = document.getElementById('passwordInput');
    var confirmPasswordInput = document.getElementById('confirmPasswordInput');
    var createAccountButton = document.getElementById('createAccountButton');
    var errorText = document.getElementById('errorText');

    var usernameValue = usernameInput.value.trim();
    var emailValue = emailInput.value.trim();
    var passwordValue = passwordInput.value.trim();
    var confirmPasswordValue = confirmPasswordInput.value.trim();

    if (usernameValue !== '' && emailValue !== '' && passwordValue !== '' && confirmPasswordValue !== '') {
    
        if (passwordValue === confirmPasswordValue) {
            createAccountButton.removeAttribute('disabled');
            errorText.style.display = 'none'; 

            fetch('http://127.0.0.1:1880/register', {
                method: 'POST', 
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    username: usernameValue,
                    email: emailValue,
                    password: passwordValue,
                }), 
            })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
            })
            .catch((error) => console.log('Error:', error));
            

        } else {
            createAccountButton.setAttribute('disabled', 'true');
            errorText.style.display = 'block'; 
        }
    } else {
        createAccountButton.setAttribute('disabled', 'true');
        errorText.style.display = 'none'; 
    }
  });
</script>





    







</body>
</html>